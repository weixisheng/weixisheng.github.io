<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>背景 | hishion blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="web front-end development engineer">
    <meta name="title" content="hishion blog">
    <meta name="keywords" content="小程序,Vue,uni-app,LESS/SCSS,Git">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/assets/css/0.styles.15635d72.css" as="style"><link rel="preload" href="/assets/js/app.594db7af.js" as="script"><link rel="preload" href="/assets/js/2.0e237a97.js" as="script"><link rel="preload" href="/assets/js/4.9b19462a.js" as="script"><link rel="prefetch" href="/assets/js/10.d62e77f1.js"><link rel="prefetch" href="/assets/js/11.818052aa.js"><link rel="prefetch" href="/assets/js/12.ac15d7e1.js"><link rel="prefetch" href="/assets/js/13.dfd5cd6b.js"><link rel="prefetch" href="/assets/js/14.ccba9c79.js"><link rel="prefetch" href="/assets/js/15.0b0285a3.js"><link rel="prefetch" href="/assets/js/16.9d4add32.js"><link rel="prefetch" href="/assets/js/17.0e7f24d8.js"><link rel="prefetch" href="/assets/js/18.3b146fce.js"><link rel="prefetch" href="/assets/js/19.3a19094c.js"><link rel="prefetch" href="/assets/js/20.1db44808.js"><link rel="prefetch" href="/assets/js/21.60a4b8db.js"><link rel="prefetch" href="/assets/js/22.1844d13b.js"><link rel="prefetch" href="/assets/js/23.a939bf2f.js"><link rel="prefetch" href="/assets/js/24.f213e282.js"><link rel="prefetch" href="/assets/js/25.70ae4a2e.js"><link rel="prefetch" href="/assets/js/26.3239155a.js"><link rel="prefetch" href="/assets/js/27.2bad417f.js"><link rel="prefetch" href="/assets/js/28.c7dc1034.js"><link rel="prefetch" href="/assets/js/29.5ed211f1.js"><link rel="prefetch" href="/assets/js/3.810fd95a.js"><link rel="prefetch" href="/assets/js/30.b03f97f0.js"><link rel="prefetch" href="/assets/js/31.264c009d.js"><link rel="prefetch" href="/assets/js/32.e874767e.js"><link rel="prefetch" href="/assets/js/33.e74b18ea.js"><link rel="prefetch" href="/assets/js/34.e9d11987.js"><link rel="prefetch" href="/assets/js/35.9369f5f0.js"><link rel="prefetch" href="/assets/js/36.d52c0c6d.js"><link rel="prefetch" href="/assets/js/37.616a3e2f.js"><link rel="prefetch" href="/assets/js/38.437f46b3.js"><link rel="prefetch" href="/assets/js/39.50c987e7.js"><link rel="prefetch" href="/assets/js/40.b2ae5373.js"><link rel="prefetch" href="/assets/js/41.c1a91f69.js"><link rel="prefetch" href="/assets/js/42.b008e743.js"><link rel="prefetch" href="/assets/js/43.f1858013.js"><link rel="prefetch" href="/assets/js/44.340ef25f.js"><link rel="prefetch" href="/assets/js/45.7df16a32.js"><link rel="prefetch" href="/assets/js/5.b13c5ae1.js"><link rel="prefetch" href="/assets/js/6.50d9706e.js"><link rel="prefetch" href="/assets/js/7.ed215c6c.js"><link rel="prefetch" href="/assets/js/8.a3508ab7.js"><link rel="prefetch" href="/assets/js/9.15316eeb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.15635d72.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">hishion blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文章" class="dropdown-title"><span class="title">文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basic/" class="nav-link">
  JS基础
</a></li><li class="dropdown-item"><!----> <a href="/mp/" class="nav-link router-link-active">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/uni/life.html" class="nav-link">
  uni-app
</a></li><li class="dropdown-item"><!----> <a href="/scss/" class="nav-link">
  SCSS/LESS
</a></li><li class="dropdown-item"><!----> <a href="/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">
  工具
</a></li><li class="dropdown-item"><!----> <a href="/graphql/" class="nav-link">
  GraphQL
</a></li><li class="dropdown-item"><!----> <a href="/driving/" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><a href="https://gitee.com/hishion.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/weixisheng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文章" class="dropdown-title"><span class="title">文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basic/" class="nav-link">
  JS基础
</a></li><li class="dropdown-item"><!----> <a href="/mp/" class="nav-link router-link-active">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/uni/life.html" class="nav-link">
  uni-app
</a></li><li class="dropdown-item"><!----> <a href="/scss/" class="nav-link">
  SCSS/LESS
</a></li><li class="dropdown-item"><!----> <a href="/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">
  工具
</a></li><li class="dropdown-item"><!----> <a href="/graphql/" class="nav-link">
  GraphQL
</a></li><li class="dropdown-item"><!----> <a href="/driving/" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><a href="https://gitee.com/hishion.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/weixisheng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>js基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>小程序</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mp/" aria-current="page" class="sidebar-link">小程序开发资料</a></li><li><a href="/mp/custom-tabbar.html" aria-current="page" class="active sidebar-link">小程序自定义tabbar</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mp/canvas.html" class="sidebar-link">小程序画布应用</a></li><li><a href="/mp/cloud.html" class="sidebar-link">小程序云函数</a></li><li><a href="/mp/mock.html" class="sidebar-link">小程序API Mock</a></li><li><a href="/mp/getSystemInfo.html" class="sidebar-link">获取系统栏信息</a></li><li><a href="/uni/life.html" class="sidebar-link">uni-app生命周期</a></li><li><a href="/uni/eslint.html" class="sidebar-link">uni cli模式配置eslint</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SCSS/LESS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git知识</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>GraphQL</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="背景"><a href="#背景" class="header-anchor">#</a> 背景</h3> <p>小程序原生提供tabbar用以切换tab页面，但是可供配置的毕竟有限，产品和设计想法也是天马行空，看到有些小程序底部tabbar“奇奇怪怪”的，于是要前端也搞一下，有些图标凸出来显得不一样。自定义 tabBar 可以让开发者更加灵活地设置 tabBar 样式，以满足更多个性化的场景。<code>基础库 2.5.0 开始支持，2.5.2 修复了跳转非tab页面、底部tabBar不消失的问题</code><br>
下面以实际项目为例（项目基于wepy，有些方法稍稍改动一下），实现一个custom-tab-bar。</p> <h3 id="开发"><a href="#开发" class="header-anchor">#</a> 开发</h3> <p>custom-tab-bar组件基于vant-weapp的tabbar组件改造，优点是不用重复造轮子、缺点就是文件稍多一点。</p> <ul><li>文件拷贝</li></ul> <ol><li>npm安装</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i @vant/weapp -S --production
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>github拷贝<br>
到<a href="https://github.com/youzan/vant-weapp.git" target="_blank" rel="noopener noreferrer">github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>上克隆项目至本地，到<a href="https://youzan.github.io/vant-weapp/#/tabbar" target="_blank" rel="noopener noreferrer">官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>查看组件用法</li></ol> <ul><li>稍加整理
去除多余组件，留下tabbar组件需要的文件。因为icon使用的是原生tabbar的图片，就把tabbar-item组件里面的的icon逻辑删了，只保留一个slot用于传图片即可。</li></ul> <blockquote><p>tab-bar-item/index.wxml</p></blockquote> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wxs</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../wxs/utils.wxs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">module</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utils<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>
  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{ utils.bem('tabbar-item', { active }) }} custom-class<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name">
  <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token selector">color:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> active ? <span class="token property">activeColor</span> <span class="token punctuation">:</span> inactiveColor <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">bind:</span>tap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{ active }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon-active<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="data:image/png;base64,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" alt="components/vant"></p> <ul><li>开始</li></ul> <ol><li>根目录下面新建custom-tab-bar文件夹（跟pages同级），微信规定的名字和结构，需要完全一致，否则不起效果。新建组件</li></ol> <p><img src="data:image/png;base64,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" alt="custom-tab-bar"></p> <ol start="2"><li>编写代码</li></ol> <blockquote><p>app.json</p></blockquote> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;tabBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;custom&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 为了保证低版本兼容以及区分哪些页面是 tab 页，tabBar 的相关配置项需完整声明</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>配置之后，custom-tab-bar会接管tabbar渲染。下面开始custom-tab-bar逻辑。</p> <blockquote><p>index.wxml</p></blockquote> <div class="language-html line-numbers-mode"><pre class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar</span> <span class="token attr-name">bindchange</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeTab<span class="token punctuation">&quot;</span></span> <span class="token attr-name">active</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{selected}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">active-color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{selectedColor}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">inactive-color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{color}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{list}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{item.isSpecial?'special':''}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{item.iconPath}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tabbar-item__image {{item.isSpecial?'special':''}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon-active<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{item.selectedIconPath}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tabbar-item__image {{item.isSpecial?'special':''}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>van-tabbar-item__text {{item.isSpecial?'special':''}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.text}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>index.js</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/* eslint-disable */</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">/**
   * 组件的初始数据
   */</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    selected<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    color<span class="token operator">:</span> <span class="token string">'#707070'</span><span class="token punctuation">,</span>
    selectedColor<span class="token operator">:</span> <span class="token string">'#e30100'</span><span class="token punctuation">,</span>
    list<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        pagePath<span class="token operator">:</span> <span class="token string">'/pages/home/index'</span><span class="token punctuation">,</span>
        text<span class="token operator">:</span> <span class="token string">'首页'</span><span class="token punctuation">,</span>
        iconPath<span class="token operator">:</span> <span class="token string">'../images/home.png'</span><span class="token punctuation">,</span>
        selectedIconPath<span class="token operator">:</span> <span class="token string">'../images/home-active.png'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        pagePath<span class="token operator">:</span> <span class="token string">'/pages/live/index'</span><span class="token punctuation">,</span>
        text<span class="token operator">:</span> <span class="token string">'直播'</span><span class="token punctuation">,</span>
        iconPath<span class="token operator">:</span> <span class="token string">'../images/live-active.png'</span><span class="token punctuation">,</span>
        selectedIconPath<span class="token operator">:</span> <span class="token string">'../images/live-active.png'</span><span class="token punctuation">,</span>
        isSpecial<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 突出图标</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        pagePath<span class="token operator">:</span> <span class="token string">'/pages/me/index'</span><span class="token punctuation">,</span>
        text<span class="token operator">:</span> <span class="token string">'我的'</span><span class="token punctuation">,</span>
        iconPath<span class="token operator">:</span> <span class="token string">'../images/me.png'</span><span class="token punctuation">,</span>
        selectedIconPath<span class="token operator">:</span> <span class="token string">'../images/me-active.png'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的方法列表
   */</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">changeTab</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> v <span class="token operator">=</span> e<span class="token punctuation">.</span>detail
      wx<span class="token punctuation">.</span><span class="token function">switchTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span>pagePath
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><blockquote><p>index.wxss</p></blockquote> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/*样式可以根据实际项目做调整*/</span>
<span class="token selector">.tabbar-item__image</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span>block<span class="token punctuation">;</span>

  <span class="token property">width</span><span class="token punctuation">:</span>24px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span>24px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.tabbar-item__image.special</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 200<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> -18px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.van-tabbar-item__text.special</span> <span class="token punctuation">{</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> -16px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li>页面使用<br> <strong>所有 tab 页的 json 里需声明 <code>usingComponents</code> 项，也可以在 app.json 全局开启</strong>。 以home/index.js为例：<br>
在onShow选中第一项：</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/* 原生小程序 */</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>getTabBar <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTabBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTabBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      selected<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">/* wepy */</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$wxpage<span class="token punctuation">.</span>getTabBar <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$wxpage<span class="token punctuation">.</span><span class="token function">getTabBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$wxpage<span class="token punctuation">.</span><span class="token function">getTabBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      selected<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      selectedColor<span class="token operator">:</span> <span class="token string">'#e30100'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">/* uni-app */</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$mp<span class="token punctuation">.</span>page<span class="token punctuation">.</span>getTabBar <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$mp<span class="token punctuation">.</span>page<span class="token punctuation">.</span><span class="token function">getTabBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$mp<span class="token punctuation">.</span>page<span class="token punctuation">.</span><span class="token function">getTabBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      selected<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      selectedColor<span class="token operator">:</span> <span class="token string">'#e30100'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbYAAAB2CAMAAACTSEZCAAAC/VBMVEX//////v76+vrX19f8/Pz///34+Pfk5OTj4+P9/v3mAAD49/bx8fH8/////f//+//oAAD5+frv7+/8//v+///9//3///ro6OjjAQHqAADkAAH5///09PP///j1AAD/+/lxcXHuAAH6/Pn7///29vbk5uPf39/4+Pny8vLa2trj4+HT09PgAQD+//z19fXl5eb///y6urr1///q6up2dnaoqKijo6OdnZ3rAQH/9//9+/3/8e/Pz8/lDxT//fb/7/T/9vH/6evMzMyxsbH9//7/9ffIyMi+vr5tbW3qAQfxAAH/9P36//zFxcXgFw/8//3/+fL/+O7/9uzCwsK3t7fkf3nXUVHkDwz/8+3JycmUlJT+//75//f/+fagoKDRHCHkAgD/7vv///T/8/Hs7Ozn5+f/59+zs7PnLTLwEhXfFRHbAgH//fz/9/v2//jc3Nz/0dLQ0ND/wLqsrKz/mZR6enrhfnXSTky4P0PeHRzpCw7/+v3//fj1+fb/7e3/8er/5+X/3diNjY1+fn7ffnzaIyTZHx3eBwP8/fn/6fH/4ub/3t/9mZ77kJj/kYyHh4eCgoJoaGjvCA3eBg3jBgz3AAH/6vjg6uX/x8T/qrjqmZj/jpD+jIn+hIb+e3rmZWHZVVjNQUbENzrYMjbJLyrgJCXQJiHqEhn7//P/8OT+xM7/0Mf+t7z/srT/s62ampqWlpbsiYf+cW71amz0WV/2S0rRKzTmGyDfERT8BQr9+//39/r1/PL/u7P+qJ/PcHXOWmPUSVa+SlPdS02/P0TSOzy+KCrvIirrDCDu/vv//u3/3Orp4ujs4ef/8uH8z+Dq6d//nqvzqKmuYm6/YmnRaGjVYl3lUFe0UFesRE7EUknuOz/dQDvdLCzpFSPRBAD89/jl6eHxx8v/vcfzw7fhp6zxnqX6mIrXiorEg4LkdHviZnn0fHfuYnHIYmTXPk/mQUawMzjGJDX2LTLkIDD6EB/XERrJFRL07u3n4tTfmpr3gZGbUVniEiHyFhxxTx58AAAN1UlEQVR42u3dB1QTdxzA8d8dd4HLuJDLhAQITZomBMIICVIpyt4FBFtEQEFmlSFoi2ito9rW2brqtq7uPRzde++99957t6//EFTU10rHXXPw/zxzl3jG9X3/yw3uAAzDMAzDMAzDMAzDMAwbdmRWPQNHIRiKVPWTBKIT3mwvKrrlhDdlZz70UJLqhFtvrRpdfuuZPgd/xQGyIxxahqAXhy275RYJ+rnDHPX+v7lc1Y+kGEKAbEAQjB8VkGbPTr35RDRPQm6mOmrKytJrjvM799xzKeTEASRy3AASGbyMQgYv86GOQA74p8uZfgTy32cTKY3CYjQqAIqLIyLU2jh6AByBPgiOdmiZqIg2Gz04n0IDI4tYs+nSYVxVRlRUrelWGIHEmI1hABLGNVy2/vYVy9aP1hVroJ/4VnXDP5tGA4MRurLHb7/pgbYHPru8NsH3CacZWdlcpngSRMD/+cWyqM6cKUvXX9lcdsXLl+zfv/b7z7pAg7IBwMQR9AFnsgerQBT8440FXfNt93z7yvjyD3b1FYaHFrzyfruSnagjWFqbPRH+BVENVbs8RMIMQgQiJk6rLkVDSpmamgrl87etXvvdGbd/sGtVpCE0dO9GFgDE9F8+gkabbyiwSuRmeHj+lwVrV+389PZX29ZGF4a3biwzJl3aoKNprcWYZISRwZctZJDggHQ8ejz62GOPPfqo7cmfum984Lvf7tl82/O7T1q9b9EN7z554YVvPfnW8ccffyGCZsHxCHpPvxjksH/f8X7BSDwSMiBmgH/ZISFHCEb+zXK/EbNJwgJiApZF25BX3fnFXRsve/jd57bv2f5cd/nYqKiyMp289EwNWjzoE+qvDozAnxHJ1qjVFE+BONAwZYzP3Iyup65sfvzx8iUblm1oPqvqrIy5GXNz2B9dClAqR0g2iauJAFFQJNR2PbV8+fJNmzZtmbFixYrNmzcvX7Z80+YVM5BlG544D4xGVpmQQAOiGe7ZTPEiyWbRZSzfM+n++ydNmrRo0uJFuxcvWoSe/jDpYmTxoq8/WQrGJJrQzaGBZTUKABDhEeIhU5niQRQ0ljm1F81aM3XqOT5r+toK+vpOPahvVevlcKaiJj19TgLNKhWWYX6wS2UPBlHQKKJyLrqkcFSoX1h02Cg0DfO/kkavfaBbR+sSqkbTcxKUSoVxmGcjxZINFFFjB7KFSaXSglWhoeHhvmLScKl0cmjh7tseLi+f+3QX1EaNhGzyEBAHRdSUi04qHIWSoWzn7N29eNY50miUUToZkUp3X33ZFdfdcO+HMCVKOfxXkqLKdspJ0f5soXtfuHLFtta2wsgwqcFgmDw59o0fbthyU+uD395ZBNOUSlbB/xYJoyIBKAKGKJCyEZQ9Pt4OQkDZRqNsYb5s4WGz7hwzbv3WV0471WCIjTWEG2LfeOO11r7otQ/edV5ULcqm4T2bKdgWZLODGLMRLi4oMTGIA/4NzjYqPHTW+NHjzrrs6o/v2ydF2aS+eGvWREdHomy1tdNYDcF3NneJx5tSl2iTDLVbAGWjuPgKt7vCIUi3wdmks87O6P6we179hhtbV8dKUTa0gVJYOKrwEl82QsEwQPObrdLrzXP2XFvnkFAwJIGRjWHQhMtNdMtd9rw0ORAUgQCP/NlC+1eS0sXPjpmx66Ytl4/puu4mA8qGHuFoizLykjPmpqdrFNnaiXxmk6gSq50cgCnomh5OBUMSGNl8uJIKva+grKLEyhAMAofhM9sd7TN27n7hvdk5GTeuQskM4dLJaEWJsp2Vfq7CUqrmNRth92TpCQDGVOIJIWEoAiYbw+Wm6WWAENz0Ej1DUIKNNmn44rOrZvQ+t3GpsmvLN2gPIDzcMDlUOnVqZNtANm0cj9kkwFVnoloEgC3FCUMTINkk7rQJTdDPisZdJuomZLbPx3Y9fUVV87IbWteEGdBYMxgGZ7NoaR6z2amYFCfDoHDgqM6FIQqIbFRjZkUTdXAXRp87gYOjuvGXbdYdRfPKLrv6htf2PlgQaoj1dStAK8m1bWdURajRZ5uax2wI5+mxAgMqVdo1NjQfisDIxlXkyahBu56mikxOyGyf1Ed1b3t11qkF0WFoFyB2aqw0ts9giF4jTDZTrjfNBKCyZbVwQMFQBEa2kBanFQ5h5I7EeDgSf9n23vjOli+/aTMY0Eu0sz11amj4yafujyxcjVaSx1ksxbxmI4Bs8qbkhTQ5PdXTGVFl0ztbVDAIk5VmB361TzmUrW3SztZ9odHhseFSxHBO7P6+669vff2kSXePnnOcxViMNkmANyogOOeCmecvWLgwzyaubKBP1AMBvh8MeoApMQR4RKt1bOqYi9ZEovM1PtLVq1eHF0QXFBSEFhRIpejpvtuWXvnLFzueaaePMxqz44BHHARneXsqMysqPXXeThdJwBAETjYKGJm8sdFOCpBNlwCpRRf9HhkdGuYLFzZw1s0HPS8YVThrPSjrn9hwOQBYjNk08MjqzvKUODiXjGuytXicEmYo3QInmwpUIZlOZ6ab5D0bYmQznvevJCOPVhja2h3BFilzlEoAUACv2WSe6iAXBf1sHq+NFFc2K0iCSvT6EifqZk+MAT75zsXM2XjxSScPdtoB+75fdP38chmAWqmcRgCfCIDMBblW/4W2DLhiFuTZGTjmnxkg2Th5ohxNnRMAJjhlILNXcCbgDU3Pns3SEc3dZ48fP/70A8YPOBvZOL82obi4oUFHTFOyLPCHAVtPCifzX/9LEUCUpHRSoslG6Cs5Brig/mxywiXPCwb+0LRy9uwEuLS8rLy8fNyAqnFj/aZMyclZgs6xddQ0pKsVhFKp5LEbRdhSSuRwgMl3fMsqmmygz7OZVJyjP5tbZo/JjQc+sWjtV6OjdToaSUDQ7PDFdHFxMU0nJQG/2RjCdm1FWkxnZ6fD4ei0pTnSFpRwcGyBkY0yOSeUZOZW+rJl5eVWZDrkwCeWVRKNatApFBqFpbhYrVaXlmZnWxQajcVoNCpYJag7OowKRVKShvdsKdUpnrq6upSUlDpv3TXXrsxrgmMLjGzonVwwgt4dEhMc39TJUcC3uDjQWBQsq0B3RojQ6XRo2lCWrqvpUKPn6pqOjuLSUqNFwwKfCIDpSBqSO92Rm+bIDZKTcEwBk+1wqJoAWBZYNJTiIg52S49ogJoIpKamRo1kZwt3USkDKjRxwZAEZjZhoFWlEpXT+arR/a9zoOpStTpCp1bHqbVxcXFabdxEEBADqN1QBEw2gqEokgIgJZRQxwlYZaoSILU9pwxtQOa0p6YWvdc+t2rs2PKyOTQk0Agqx3823wWuCGSFEJDZScIQBEA2AhBXnQPcC9zgWLlwoTk5eaZ5oQ34h0YbKNl19fU5m9FVU8p165YtPeXe3t6X75gHIEPVgHcqFeNJTkvJ8zCUq4Uk7B4Z2FVw7HT/fzYARrYyPxnFMpvNmSSQtlwSCBKEwIKFfeKZl3rvu29H70vPbnjxjBuvWnbVVZvW54BAXMnmEpB7JY5r9CsvyK8OOj8/f6WcgGP637MxJAMIY6sgSd/8/Jn5M/MvmGkDAWiMaMcMctY9svT6eUsyilIzrrt6x849e3b2vk0KdLMDCia0SIhKiQusXhlX1xJEyVqscGz/ezYfRr8yOTk/+YLkYHAn+s4EQI8gV6Wi/bIkY8LSz7+++LWdO57NGJNx9or5m7Zcv3VJDgDDCJCNciabL0D/bnN+cmIPSVQne0gqUTyHkuVZBCB5euCyKFcKyXhiQADZHR1JxvTmV9tWFe5//YV5oz+6c8nWGVdedfV9V5gAtAJsjpBAZiaqrB6T/Vr3+WZzNefMZLLEcyjZhf7O5vx8swOoSqB6SCqlSQX8oy+91KKA+TdN7ZOuev2eed1PL9+6a9f9Oxbd06zVutRarRZ4pgKr02z29jirKZPXqk+RkC0xIszWSbizIOYaqyqrEQRANzTQ0NC89YqurvkZHy+ZsuT9Mdvu375918tjgTYJkQ2Cks2VDDgW2gi3LxtBSKwiynZgJWlToeG2MDc5OQ+EQKen0zTd/PyOe3tfevGOR2Zn/Dx3a8Y7l8//9CwAECIbIZdNr4TECzySvOm+laSMALeIsplWmmfmo+1HfcxMcyXJAVQsFGK40VFRcQlv//riV7333n13791PPfNR1bbtX23fs20ejRaiQyTAv7SWBZWMN7MuzUtR3kaveWaQeDZJGiuBQbNMjgGEQg8ZAfyjp01T69qLUs9bV19U/0jRutScqOvQrUrmXZfhG2cCZCNk1fm5QAKz4Fo5A8BQADK3eLL5Y5koNCH6HwKh0RFkgByoL0LHuc4rqk9NrT8PUueOjlJraQQEQFIuBhC7/xUDYvrKLWAYYEBCgQrNSBDKRHSO1PKQ8ZYiJViUgNzMskkA06LUai0IgQI/Bg4QVzY/AgFB0XSpRQGDv15EoaCnnasunSiuW0KOsGyD0AMd0RYkOtstipsH42w42zDIVpqtgJFDXGe3//yudNn+b+HAwsiAs4kSziZKwyGbj0ajGUHfBmDYZBthcDZRwtlECWcTJZxNlHA2UcLZRAlnEyWcTZRwNlHC2UQJZxMlnE2UcDZRwtlECWcTJZxNlHA2UcLZRAlnEyWcTZRwNlHC2UQJZxMlnE2UcDZRwtlEieRwNhGSNDYCJjoyt5sAHwITDvxbJk7Pod+HoUhMOPBv2bmmeIdPECYcwDAMwzAMwzAMwzAMw7Dh7g+5JF82DMLdCQAAAABJRU5ErkJggg==" alt=""></p> <ul><li>优化<br>
实现onTabItemTap事件，修改custom-tab-bar/index.js文件的<code>changeTab</code>事件：</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1.在当前tab页点击tab才会触发</span>
<span class="token function">changeTab</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> v <span class="token operator">=</span> e<span class="token punctuation">.</span>detail
  <span class="token comment">/* tabItemTap */</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>selected <span class="token operator">==</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> pages <span class="token operator">=</span> <span class="token function">getCurrentPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> page <span class="token operator">=</span> pages<span class="token punctuation">[</span>pages<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token comment">// 这里如果直接调用onTabItemTap会报错，定义一个类似的onTabItemTap事件tabItemTap</span>
    page<span class="token punctuation">.</span>tabItemTap <span class="token operator">&amp;&amp;</span> page<span class="token punctuation">.</span><span class="token function">tabItemTap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/* tabItemTap */</span>
  wx<span class="token punctuation">.</span><span class="token function">switchTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span>pagePath
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 2.只要切换了tab就触发</span>
<span class="token function">changeTab</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> v <span class="token operator">=</span> e<span class="token punctuation">.</span>detail
  <span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span>pagePath<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/^\//</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
  wx<span class="token punctuation">.</span><span class="token function">switchTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span>pagePath<span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> pages <span class="token operator">=</span> <span class="token function">getCurrentPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">let</span> targetIndex <span class="token operator">=</span> pages<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>route <span class="token operator">===</span> target<span class="token punctuation">)</span>
      targetIndex <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> pages<span class="token punctuation">[</span>targetIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>tabItemTap <span class="token operator">&amp;&amp;</span> pages<span class="token punctuation">[</span>targetIndex<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">tabItemTap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="后续"><a href="#后续" class="header-anchor">#</a> 后续</h3> <ul><li>官方推荐使用cover-view+cover-image实现，由于示例项目的tab页面并没有原生组件，暂时用不上就用view了。</li> <li>普通组件形式<br>
基于以上逻辑，可以不用custom-tab-bar，自定义一个普通组件，然后在页面导入使用，监听组件事件等。这种实现方式在低版本会报错Component is not found in path &quot;custom-tab-bar/index&quot;，不影响小程序使用。</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- other --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tab-bar</span> <span class="token attr-name">@tabitemTab.user</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onTabItemTap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tabIndex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tab-bar</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>后面iOS系统样式获取不到，导致tabbar错乱，把样式放到<code>common.less</code>引入</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* tabbar */</span>
<span class="token selector">.van-tabbar</span><span class="token punctuation">{</span><span class="token property">display</span><span class="token punctuation">:</span>-webkit-flex<span class="token punctuation">;</span><span class="token property">display</span><span class="token punctuation">:</span>flex<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span>50px<span class="token punctuation">;</span><span class="token property">background-color</span><span class="token punctuation">:</span>#fff<span class="token punctuation">;</span><span class="token property">border-top</span><span class="token punctuation">:</span> 1rpx solid #e2e2e2<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.van-tabbar--fixed</span><span class="token punctuation">{</span><span class="token property">position</span><span class="token punctuation">:</span>fixed<span class="token punctuation">;</span><span class="token property">bottom</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><span class="token property">left</span><span class="token punctuation">:</span>0<span class="token punctuation">}</span>
<span class="token selector">.van-tabbar--safe</span><span class="token punctuation">{</span><span class="token property">padding-bottom</span><span class="token punctuation">:</span>34px<span class="token punctuation">}</span>
<span class="token selector">.van-tabbar-item</span><span class="token punctuation">{</span><span class="token property">-webkit-flex</span><span class="token punctuation">:</span>1<span class="token punctuation">;</span><span class="token property">flex</span><span class="token punctuation">:</span>1<span class="token punctuation">;</span><span class="token property">display</span><span class="token punctuation">:</span>-webkit-flex<span class="token punctuation">;</span><span class="token property">display</span><span class="token punctuation">:</span>flex<span class="token punctuation">;</span><span class="token property">-webkit-align-items</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span><span class="token property">align-items</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span><span class="token property">-webkit-flex-direction</span><span class="token punctuation">:</span>column<span class="token punctuation">;</span><span class="token property">flex-direction</span><span class="token punctuation">:</span>column<span class="token punctuation">;</span><span class="token property">-webkit-justify-content</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span><span class="token property">justify-content</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span>#707070<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span>10px<span class="token punctuation">;</span><span class="token property">line-height</span><span class="token punctuation">:</span>1<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.van-tabbar-item__icon</span><span class="token punctuation">{</span><span class="token property">position</span><span class="token punctuation">:</span>relative<span class="token punctuation">;</span><span class="token property">margin-bottom</span><span class="token punctuation">:</span>3px<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span>18px<span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="上线项目预览"><a href="#上线项目预览" class="header-anchor">#</a> 上线项目预览</h3> <p><img src="/assets/img/mp_wanmian.dbb0fd9b.jpg" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mp/" class="prev router-link-active">
        小程序开发资料
      </a></span> <span class="next"><a href="/mp/canvas.html">
        小程序画布应用
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.594db7af.js" defer></script><script src="/assets/js/2.0e237a97.js" defer></script><script src="/assets/js/4.9b19462a.js" defer></script>
  </body>
</html>
